<!DOCTYPE html>
<html>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> - </title>
  <style type="text/css">

    html,
    body {
      margin: 0px;
      height: 100%;
      width: 100%;
    }

    #map {
      width: 100%;
      height: 100%;
      float: left;
    }

    .maptalks-toolbar-horizonal li {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

  </style>
  <link rel="stylesheet" href="https://maptalks.org/api/maptalks.css">
  <script type="text/javascript" src="https://maptalks.org/api/maptalks.min.js"></script>
  <body>

    <div id="map"></div>

    <script>
      var center = new maptalks.Coordinate(-0.113049,51.498568);
      var map = new maptalks.Map('map', {
        center: center,
        zoom: 14,
        attribution: {
          content: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/attributions">CARTO</a>'
        },
        baseLayer: new maptalks.TileLayer('base', {
          urlTemplate: 'http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png',
          subdomains: ["a","b","c","d","e"]
        })
      });

      var layer = new maptalks.VectorLayer('vector').addTo(map);
      var bar1 = new maptalks.Marker(
        center.add(-0.012,-0.002),
        {
          'symbol': {
            'markerType': 'bar',
            'markerWidth': 48,
            'markerHeight': 33,
            'markerFill': 'rgb(135,196,240)',
            'markerLineWidth': 2,
            'markerLineColor' : '#fff'
          }
        }
      ).addTo(layer);

      var bar2 = new maptalks.Marker(
        center.add(-0.004,-0.002),
        {
          'symbol': {
            'markerType': 'bar',
            'markerWidth': 48,
            'markerHeight': 47,
            'markerFill': 'rgb(216,115,149)',
            'markerLineWidth': 2,
            'markerLineColor' : '#fff'
          }
        }
      ).addTo(layer);

      var bar3 = new maptalks.Marker(
        center.add(0.004,-0.002),
        {
          'symbol': {
            'markerType': 'bar',
            'markerWidth': 48,
            'markerHeight': 79,
            'markerFill': '#1bbc9b',
            'markerLineWidth': 2,
            'markerLineColor' : '#fff'
          }
        }
      ).addTo(layer);

      function animation() {
        var duration = 1000;

        bar1.animate({
          'symbol': {
            'markerHeight': 82
          }
        }, {
          'duration': duration
        });

        bar2.animate({
          'symbol': {
            'markerHeight': 197
          }
        }, {
          'duration': duration
        });

        bar3.animate({
          'symbol': {
            'markerHeight': 154
          }
        }, {
          'duration': duration
        });
      }

      function reset() {
        bar1.updateSymbol({
          'markerHeight' : 33
        });
        bar2.updateSymbol({
          'markerHeight' : 47
        });
        bar3.updateSymbol({
          'markerHeight' : 79
        });
      }

      var actionBar = new maptalks.control.Toolbar({
        items: [
          {
            item: 'Animation',
            click: function () {
              reset();
              animation();
            }
          }
        ]
      }).addTo(map);

    </script>
  </body>
</html>
